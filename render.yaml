services:
  - type: web
    name: max-betting-ai
    env: python
    buildCommand: |
      # Install Python dependencies
      pip install -U pip
      pip install -r requirements.txt
      # Build frontend
      cd frontend
      npm install
      npm run build
      cd ..
    startCommand: "uvicorn source.main:app --host 0.0.0.0 --port $PORT"
    healthCheckPath: /health
    envVars:
      - key: PYTHON_VERSION
        value: 3.11
      - key: PORT
        value: 8000
      - key: OPENAI_API_KEY
        value: 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
      - key: CRICKET_API_KEY
        value: RS5:836fe0c1a85d44000f7ebe67f9d730c4
      - key: CRICKET_PROJECT_ID
        value: RS_P_1942111570733699074
      - key: FOOTBALL_API_TOKEN
        value: 7O6SVG55TP0z3aK9uZKcM2zKJ90pdTemHBViFl5GFpUazz8NyjPlR2C7ygey
      - key: APP_ENV
        value: production
      - key: FRONTEND_URL
        value: https://realwin-frontend-master.vercel.app
      - key: CORS_ORIGINS
        value: https://realwin-frontend-master.vercel.app,https://realwin-frontend-master-a7tonaavf-vaibhav05-edus-projects.vercel.app
      - key: DB_HOST
        value: realwin.czgiwmwqcexk.eu-west-2.rds.amazonaws.com
      - key: DB_NAME
        value: postgres
      - key: DB_USER
        value: postgres
      - key: DB_PASSWORD
        value: postgrespassword
      - key: DB_PORT
        value: "5432"
      - key: SECRET_KEY
        value: "realwin_max_secure_jwt_secret_key_2024"
    autoDeploy: true
